(this.webpackJsonpherolo=this.webpackJsonpherolo||[]).push([[0],{41:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r,a,c,i,o,s,u,l=n(0),d=n.n(l),h=n(22),j=n.n(h),b=(n(41),n(13)),f=n.n(b),p=n(19),x=n(36),m=n(15),O=n(21),v=n(5),g=n(2),y=n(3),w=y.a.button(r||(r=Object(g.a)(["\n  padding: 0.5rem;\n  background-color: #cba5fa;\n  border-radius: 3px;\n  border: none;\n  color: #673a9f;\n"]))),k=y.a.section(a||(a=Object(g.a)(["\n  width: 80%;\n  margin: 0 auto;\n"]))),C=y.a.header(c||(c=Object(g.a)(["\n  position: sticky;\n  top: 0;\n  padding: 0;\n\n  background-color: #cba5fa;\n  color: #fff;\n"]))),T=Object(y.a)(k)(i||(i=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 1rem 0;\n"]))),F=y.a.nav(o||(o=Object(g.a)([""]))),N=y.a.ol(s||(s=Object(g.a)(["\n  display: flex;\n  list-style-type: none;\n"]))),W=y.a.li(u||(u=Object(g.a)(["\n  &:not(:first-child) {\n    margin-left: 1rem;\n  }\n"]))),D=n(1);var K,S,A,E,L=function(){return Object(D.jsx)(C,{children:Object(D.jsxs)(T,{children:[Object(D.jsx)("h2",{children:"Herolo Weather Task"}),Object(D.jsx)(F,{children:Object(D.jsxs)(N,{children:[Object(D.jsx)(W,{children:Object(D.jsx)(O.b,{exact:!0,activeClassName:"selected",to:"./",children:"Home"})}),Object(D.jsx)(W,{children:Object(D.jsx)(O.b,{activeClassName:"selected",to:"./favorites",children:"Favorites"})})]})})]})})},P=n(33),H=n.n(P),I=y.a.section(K||(K=Object(g.a)(["\n  display: flex;\n  position: relative;\n  justify-content: center;\n  align-items: center;\n\n  margin: 3rem auto;\n"]))),z=y.a.input(S||(S=Object(g.a)(["\n  padding: 0.5rem;\n  border-radius: 3px;\n  border-color: #cba5fa;\n  margin-right: 0.5rem;\n  min-width: 25vw;\n"]))),B=y.a.ul(A||(A=Object(g.a)(["\n  position: absolute;\n  top: 1.3rem;\n  list-style-type: none;\n  background: #fffa;\n  width: 25vw;\n  border-bottom-left-radius: 3px;\n  border-bottom-right-radius: 3px;\n"]))),M=y.a.li(E||(E=Object(g.a)(["\n  padding: 0.5rem;\n"])));function V(e){return fetch("http://dataservice.accuweather.com/currentconditions/v1/".concat(e,"?apikey=KeTtBXHNPkYi36PyAGOKIulNeqKtlbhA")).then((function(e){if(e.ok)return e.json();throw new Error("Could not fetch current weather.")})).catch((function(e){throw new Error("Could not fetch current weather.")}))}function q(e){return fetch("http://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(e,"?apikey=KeTtBXHNPkYi36PyAGOKIulNeqKtlbhA")).then((function(e){if(e.ok)return e.json();throw new Error("Could not fetch the next 5 days weather.")})).catch((function(e){throw new Error("Could not fetch the next 5 days weather.")}))}function G(e){return fetch("http://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=KeTtBXHNPkYi36PyAGOKIulNeqKtlbhA&q=".concat(e,"\n")).then((function(e){if(console.log(e),e.ok)return e.json();throw new Error("Could not fetch suggestions.")})).catch((function(e){throw new Error("Could not fetch suggestions.")}))}var R=function(e){var t=e.suggestions,n=e.input,r=e.setLocation,a=e.emptySuggestions;return!!t&&Object(D.jsx)(B,{children:t.map((function(e){return Object(D.jsx)(M,{onClick:function(){n.current.value=e.LocalizedName,r({id:e.Key,name:e.LocalizedName}),a()},children:e.LocalizedName},e.Key)}))})},X=n(6),Y=n(18),J=Object(Y.b)({name:"weather",initialState:{weather:{location:{},next5Days:[],currentWeather:{}}},reducers:{changeLocation:function(e,t){e.weather.location=t.payload},changeNext5Days:function(e,t){e.weather.next5Days=t.payload.DailyForecasts},changeCurrentWeather:function(e,t){e.weather.currentWeather&&(e.weather.currentWeather={temperature:t.payload[0].Temperature.Metric.Value,weatherText:t.payload[0].WeatherText})}}}),U=J.actions,$=U.changeLocation,Q=U.changeNext5Days,Z=U.changeCurrentWeather,_=function(e){return e.weather.weather.next5Days},ee=function(e){return e.weather.weather},te=J.reducer;var ne,re=function(e){var t=e.errorHandler,n=Object(l.useState)([]),r=Object(m.a)(n,2),a=r[0],c=r[1],i=Object(l.useState)(null),o=Object(m.a)(i,2),s=o[0],u=o[1],d=Object(l.useRef)(null),h=Object(X.b)();function j(){return(j=Object(p.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G(d.current.value);case 3:t=e.sent,c(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.message),b(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function b(e){c([]),t(e)}function x(){return(x=Object(p.a)(f.a.mark((function e(t){var n,r,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null==s&&u({id:null===(n=a.filter((function(e){return e.LocalizedName.toLowerCase()===t.target[0].value.toLowerCase()}))[0])||void 0===n?void 0:n.Key,name:t.target[0].value}),null!=s&&null!=s.id){e.next=4;break}return e.abrupt("return",b("Wrong search"));case 4:return e.prev=4,e.next=7,q(s.id);case 7:return r=e.sent,e.next=10,V(s.id);case 10:i=e.sent,h($(s)),h(Q(r)),h(Z(i)),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),b(e.t0.message);case 19:c([]),u(null);case 21:case"end":return e.stop()}}),e,null,[[4,16]])})))).apply(this,arguments)}return Object(D.jsx)(I,{children:Object(D.jsxs)("form",{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(D.jsx)(z,{type:"text",placeholder:"City",ref:d,onChange:H.a.debounce((function(){return j.apply(this,arguments)}),1e3)}),Object(D.jsx)(w,{children:"Check weather"}),Object(D.jsx)(R,{suggestions:a,input:d,setLocation:u,emptySuggestions:function(){return c([])}})]})})},ae=Object(y.a)(k)(ne||(ne=Object(g.a)(["\n  background-color: #f7bcb4;\n  border: #f57a69;\n  color: #c23029;\n  border-radius: 3px;\n  padding: 1rem;\n"])));var ce,ie,oe,se,ue,le,de,he,je,be=function(e){var t=e.errors;return t.length?Object(D.jsxs)(ae,{children:["Errors: ",t.map((function(e){return"".concat(e," ")}))]}):""},fe=y.a.section(ce||(ce=Object(g.a)(["\n  margin: 0 auto;\n  width: 80%;\n  padding: 1.5rem 3rem;\n  background-color: #7b57ae;\n  color: #eaeaff;\n  border-radius: 3px;\n"]))),pe=y.a.header(ie||(ie=Object(g.a)(["\n  text-align: center;\n"]))),xe=y.a.div(oe||(oe=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]))),me=y.a.div(se||(se=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),Oe=y.a.footer(ue||(ue=Object(g.a)(["\n  margin-top: 2rem;\n"]))),ve=y.a.ol(le||(le=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 0;\n  list-style-type: none;\n"]))),ge=y.a.li(de||(de=Object(g.a)(["\n  background-color: #673a9f;\n  text-align: center;\n  padding: 1rem;\n  min-width: calc(20% - 4rem);\n  border-radius: 3px;\n"]))),ye=y.a.h3(he||(he=Object(g.a)(["\n  margin-top: 0;\n"]))),we=y.a.div(je||(je=Object(g.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  text-align: center;\n\n  p {\n    padding: 0;\n    width: 100%;\n  }\n"])));var ke=function(e){var t=e.day,n=e.temperature,r=e.weatherText;return Object(D.jsxs)(ge,{children:[Object(D.jsx)(ye,{children:t}),Object(D.jsxs)("span",{children:["From ",n.minimum,"'C To ",n.maximum,"'C"]}),Object(D.jsxs)(we,{children:[Object(D.jsx)("img",{src:"https://img.icons8.com/color/48/000000/smiling-sun.png",alt:"sun",height:"25px"}),Object(D.jsx)("p",{children:r.byDay})]}),Object(D.jsxs)(we,{children:[Object(D.jsx)("img",{src:"https://img.icons8.com/emoji/48/000000/full-moon-face.png",alt:"night",height:"25px"}),Object(D.jsx)("p",{children:r.byNight})]})]})};function Ce(e){var t=e.Minimum,n=e.Maximum;return{minimum:"F"===t.Unit?Te(t.Value):t.Value,maximum:"F"===n.Unit?Te(n.Value):n.Value}}function Te(e){return(5/9*(e-32)).toFixed(1)}function Fe(e){var t=new Date(e).getDay();return isNaN(t)?null:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t]}var Ne=function(){var e=Object(X.c)(_);return Object(D.jsx)(Oe,{children:Object(D.jsx)(ve,{children:null===e||void 0===e?void 0:e.map((function(e){return Object(D.jsx)(ke,{day:Fe(e.Date),temperature:Ce(e.Temperature),weatherText:{byDay:e.Day.IconPhrase,byNight:e.Night.IconPhrase}},e.Date)}))})})},We=n(35),De=Object(Y.b)({name:"favorites",initialState:{favorites:[]},reducers:{changeFavorites:function(e,t){e.favorites=t.payload},addFavorite:function(e,t){console.log(e),e.favorites.find((function(e){return e.location.id===t.payload.location.id}))||e.favorites.unshift(t.payload)},deleteFavorite:function(e,t){e.favorites=e.favorites.filter((function(e){return e.location.id!==t.payload.location.id}))},updateFavorites:function(e,t){if(!Array.isArray(t.payload))return e.favorites=Ke(t.payload,e.favorites);var n,r=e.favorites.map((function(e){return e.location.id})),a=t.payload.filter((function(e){return r.includes(e.location.id)})),c=Object(We.a)(a);try{for(c.s();!(n=c.n()).done;){Ke(n.value,e.favorites)}}catch(i){c.e(i)}finally{c.f()}}}});function Ke(e,t){return t.map((function(t){return t.location.id===e.location.id?e:t}))}var Se=De.actions,Ae=(Se.changeFavorites,Se.addFavorite),Ee=Se.deleteFavorite,Le=(Se.updateFavorites,Se.isFavorite,function(e){return e.favorites.favorites}),Pe=De.reducer;var He=function(){var e,t,n,r=Object(X.b)(),a=Object(X.c)(ee),c=Object(X.c)(Le),i=Object(l.useState)(c.find((function(e){return e.location.id===a.location.id}))),o=Object(m.a)(i,2),s=o[0],u=o[1];return Object(l.useEffect)((function(){u(c.find((function(e){return e.location.id===a.location.id})))}),[a,c]),Object(D.jsx)(pe,{children:Object(D.jsxs)(xe,{children:[Object(D.jsxs)(me,{children:[Object(D.jsx)("img",{src:"https://img.icons8.com/color/96/000000/weather-forecast.png",alt:"Weather",style:{marginRight:"3rem"}}),Object(D.jsxs)("div",{children:[Object(D.jsx)("h3",{children:null===(e=a.location)||void 0===e?void 0:e.name}),Object(D.jsxs)("span",{children:[null===(t=a.currentWeather)||void 0===t?void 0:t.temperature,"'C"]})]})]}),Object(D.jsx)("h1",{children:null===(n=a.currentWeather)||void 0===n?void 0:n.weatherText}),Object(D.jsx)("div",{children:s?Object(D.jsx)(w,{onClick:function(){u(!1),r(Ee(a))},children:"Remove from Favorites"}):Object(D.jsx)(w,{onClick:function(){u(!0),r(Ae(a))},children:"Add to Favorites"})})]})})};var Ie,ze,Be,Me,Ve=function(){return Object(D.jsxs)(fe,{children:[Object(D.jsx)(He,{}),Object(D.jsx)(Ne,{})]})},qe=y.a.ul(Ie||(Ie=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  list-style-type: none;\n  flex-wrap: wrap;\n"]))),Ge=y.a.li(ze||(ze=Object(g.a)(["\n  padding: 1rem;\n  border-radius: 3px;\n  background-color: #7b57ae;\n  color: #eaeaff;\n  text-align: center;\n  margin-bottom: 1rem;\n  min-width: calc(20% - 4rem);\n"]))),Re=y.a.h2(Be||(Be=Object(g.a)([""]))),Xe=y.a.h1(Me||(Me=Object(g.a)(["\n  font-size: 3rem;\n  text-align: center;\n  color: #673a9f;\n  width: 100%;\n"])));var Ye=function(e){var t=e.place,n=e.temperature,r=e.weatherText;return Object(D.jsxs)(Ge,{children:[Object(D.jsx)(Re,{children:t}),Object(D.jsxs)("p",{children:[n,"'C"]}),Object(D.jsx)("p",{children:r})]})};var Je=function(){var e=Object(X.c)(Le);return Object(D.jsxs)(k,{children:[Object(D.jsx)(Xe,{children:e.length?"Favorites":"There are no favorite cities yet!"}),Object(D.jsx)(qe,{children:e.map((function(e){return Object(D.jsx)(Ye,{place:e.location.name,temperature:e.currentWeather.temperature,weatherText:e.currentWeather.weatherText})}))})]})};var Ue=function(){var e=Object(l.useState)([]),t=Object(m.a)(e,2),n=t[0],r=t[1],a=Object(X.b)();function c(e){r([].concat(Object(x.a)(n),[e.message])),setTimeout((function(){r([])}),1e4)}function i(){return(i=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(215854);case 3:return t=e.sent,e.next=6,V(215854);case 6:n=e.sent,a($({id:215854,name:"Tel Aviv"})),a(Q(t)),a(Z(n)),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),c(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(l.useEffect)((function(){!function(){i.apply(this,arguments)}()}),[]),Object(D.jsxs)(O.a,{children:[Object(D.jsx)(L,{}),Object(D.jsxs)(v.c,{children:[Object(D.jsx)(v.a,{path:"./favorites",children:Object(D.jsx)(Je,{})}),Object(D.jsxs)(v.a,{exact:!0,path:"./",children:[Object(D.jsx)(re,{errorHandler:c}),n&&Object(D.jsx)(be,{errors:n}),Object(D.jsx)(Ve,{})]})]})]})},$e=Object(Y.a)({reducer:{weather:te,favorites:Pe}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));j.a.render(Object(D.jsx)(d.a.StrictMode,{children:Object(D.jsx)(X.a,{store:$e,children:Object(D.jsx)(Ue,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[51,1,2]]]);
//# sourceMappingURL=main.ba55551a.chunk.js.map